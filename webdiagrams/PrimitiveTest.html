<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Primitive Test</title>
    <script src="look-and-feel.js"></script>
    <script src="primitives.js"></script>
    <script src="svg.js"></script>

    <style>

        #svg {
            border: 1px solid #000;
        }

    </style>

    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto');
    </style>

</head>
<body>

<svg id="svg" width="640" height="480"></svg>

<script>

    function randomText() {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

        for (var i = 0; i < 1 + Math.random() * 100; i++)
            text += possible.charAt(Math.floor(Math.random() * possible.length));

        return text;
    }

    var rect;
    var text;
    // var circle;
    var umlClass;
    var node;

    (function () {
        let svgArea = new SVGArea("#svg");

        //****************************
        // UML Interface.
        rect = svgArea.rect()
        umlClass = svgArea.vgroup(10, 10);
        umlClass.frame = rect;
        let stereotype = svgArea.text(undefined, undefined, "<<interface>>");
        stereotype.fontStylingAttributes.style = "italic";
        umlClass.addChild(stereotype, VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        umlClass.addChild(svgArea.text(undefined, undefined, "Cliente"), VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        umlClass.addChild(svgArea.line(), VerticalGroup.MATCH_PARENT);
        umlClass.addChild(svgArea.text(undefined, undefined, "- cpf: String"));
        umlClass.addChild(svgArea.text(undefined, undefined, "- nome: String"));
        umlClass.addChild(svgArea.text(undefined, undefined, "- dataNascimento: Date"));
        umlClass.addChild(svgArea.line(), VerticalGroup.MATCH_PARENT);
        umlClass.addChild(svgArea.text(undefined, undefined, "+ salvar(): void"));
        umlClass.addChild(svgArea.text(undefined, undefined, "+ atualizar(): void"));
        text = svgArea.text(undefined, undefined, "+ consultarPorCpf(cpf: String): List<Cliente>");
        umlClass.addChild(text);
        //****************************

        //****************************
        // UML Actor.
        let umlActor = svgArea.vgroup(10, 300);
        umlActor.addChild(svgArea.image(undefined, undefined, 25, 50, "images/uml_actor.svg"), VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        umlActor.addChild(svgArea.text(undefined, undefined, "Ator"));
        //****************************

        //****************************
        // Graph node.
        node = svgArea.vgroup(340, 50);
        node.frame = svgArea.circle();
        let text1 = svgArea.text(undefined, undefined, "NÃ³ de super grafo");
        node.addChild(text1, VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        node.addChild(svgArea.text(undefined, undefined, "2a linha"), VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        node.addChild(svgArea.text(undefined, undefined, "3a linha"), VerticalGroup.WRAP_CONTENT, VerticalGroup.CENTER);
        //****************************

    })();

    function changeDimensions() {
        if (umlClass.width > 400) {
            umlClass.width -= 50;
        } else {
            umlClass.width += 10;
        }
        umlClass.fitContent = false;
    }

    function move() {
        if (umlClass.x > 200) {
            umlClass.x -= 50;
        } else {
            umlClass.x += 10;
        }
    }

    function changeStyle() {
        rect.appearance({
            fill: "none",
            stroke: "red",
            strokeWidth: 2
        });
    }

    function changeText() {
        text.text = randomText();
    }

    function fitContent() {
        umlClass.forceFitContent();
    }

</script>

<button type="button" onclick="changeDimensions()">Change dimensions</button>
<button type="button" onclick="move()">Move</button>
<button type="button" onclick="changeStyle()">Change style</button>
<button type="button" onclick="changeText()">Change text</button>
<button type="button" onclick="fitContent()">Fit content</button>

</body>
</html>